<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phòng Trà Không Tên</title>
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="/css/overview.css">
    <link rel="stylesheet" href="/css/alert.css">

</head>
<body>
    <!-- header section starts      -->
    <%- include("../partials/header.ejs"); %>
    <!-- header section ends-->


    <section class="dishes" id="dishes">
        <div><h1 class="heading"> Menu </h1></div>

        <div class="box-container">
            <% menus.forEach(menu => { %>
                <div class="box">
                    <img src="/img/menus/<%=menu.imageDish %>" alt="">
                    <h3><%= menu.name %></h3>
                    <div class="describe">
                        <p style="font-size: 14px;font-family: 'Nunito', sans-serif;"><%= menu.description%></p>
                    </div>
                    <span><%= new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(menu.price) %> </span>
                </div>
            <% }); %>  
        </div>

    </section>
    <!-- dishes section ends -->

    <!-- about section starts  -->
    <section class="about" id="about">

        <h1 class="heading"> About Us? </h1>

        <div class="row">

            <div class="image">
                <img src="/img/about-img.png" alt="">
            </div>

            <div class="content">
                <h3>best food in the country</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolore, sequi corrupti corporis quaerat voluptatem ipsam neque labore modi autem, saepe numquam quod reprehenderit rem? Tempora aut soluta odio corporis nihil!</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aperiam, nemo. Sit porro illo eos cumque deleniti iste alias, eum natus.</p>
                <div class="icons-container">
                    <div class="icons">
                        <i class="fas fa-shipping-fast"></i>
                        <span>free delivery</span>
                    </div>
                    <div class="icons">
                        <i class="fas fa-dollar-sign"></i>
                        <span>easy payments</span>
                    </div>
                    <div class="icons">
                        <i class="fas fa-headset"></i>
                        <span>24/7 service</span>
                    </div>
                </div>
                <a href="#" class="btn">learn more</a>
            </div>

        </div>

    </section>
    <!-- about section ends -->

    <!-- menu section starts  -->
    <section class="menu" id="menu">

        <h1 class="sub-heading"> Lịch Diễn  </h1>
        <h3 class="heading"> Phòng Trà </h3>

        <div class="box-container">
            <% shows.forEach(show => { %>
                <div class="box">
                    <div class="image">
                        <img src="/img/shows/<%=show.imageShow %>" alt="" height="283" width="220">
                    </div>
                    <div class="content">
                        <h3 style="text-align: center;"><%=show.day %> - <%=show.date.toLocaleString('zh-HK',{day:'numeric',month: 'numeric',year: 'numeric'})%></h3>
                        <h3 style="text-align: center;">Đêm nhạc</h3>
                        <h3 style="text-align: center;"><%=show.content %></h3>
                        <h3 style="text-align: center;"><%=show.singer %></h3>
                        <div style="text-align: center;"><a href="#order" class="btn">Đặt Bàn</a></div>
                    </div>
                </div>
            <% });%>
        </div>

    </section>

    <!-- order section starts  -->
    <section class="order" id="order">
        <% if (user) { %>
            <h3 class="sub-heading"> order now </h3>
            <h1 class="heading"> Đặt Bàn Phòng Trà </h1>
            <form class="form-user-order">
                <input type="text" id="id_user" value="<%=user._id%>" hidden>
                <div class="inputBox">
                    <div class="input">
                        <span>Họ và tên</span>
                        <input type="text" id="name" value="<%=user.name%>" required>
                    </div>
                    <div class="input">
                        <span>Số Điện thoại</span>
                        <input type="text" id="phone" placeholder="Vui lòng nhập SĐT" required pattern="[0-9]{10,11}" oninvalid="setCustomValidity('Vui lòng nhập số điện thoại hợp lệ')" onchange="try{setCustomValidity('')}catch(e){}">
                    </div>
                </div>
                <div class="inputBox">
                    <div class="input">
                        <span>Số Lượng</span>
                        <input type="number" id="amount" placeholder="Vui lòng nhập số lượng" min="0">
                    </div>
                    <div class="input">
                        <span>Ngày Đặt</span>
                        <input type="date" id="dateOrder" placeholder="extra with food" required>
                    </div>
                </div>
                <div class="inputBox">
                    <div class="input">
                        <span>Show Diễn</span>
                        <select id="show">
                        <% shows.forEach(show => { %>
                            <option value="<%=show._id %>"><%=show.content %></option>
                        <% }); %>  
                        </select>
                    </div>
                    <div class="input">
                        <span>Thời gian</span>
                        <input id="timeOrder" type="time" required>
                    </div>
                </div>
                <div>
                    <span class="note">Ghi Chú</span>
                    <textarea id="note" placeholder="Ghi Chú" id="" class="text-note" cols="30" rows="10"></textarea>
                </div>

                <input type="submit" value="order now" class="btn">
            </form>
        <% } else {%>
            <h3 class="sub-heading"> order now </h3>
            <div style="text-align: center;font-size: 20px;"><h1>Vui lòng đăng nhập để đặt bàn</h1></div>
        <% } %>
    </section>

    <!-- order section ends -->

    <!-- footer section starts  -->
    <%- include("../partials/footer.ejs"); %>
    <!-- footer section ends -->

    <script>
        let section = document.querySelectorAll('section');
        let navLinks = document.querySelectorAll('header .navbar a');

        window.onscroll = () =>{
            section.forEach(sec =>{
                let top = window.scrollY;
                let height = sec.offsetHeight;
                let offset = sec.offsetTop - 150;
                let id = sec.getAttribute('id');
                if(top >= offset && top < offset + height){
                    navLinks.forEach(links =>{
                        links.classList.remove('active');
                        document.querySelector('header .navbar a[href*='+id+']').classList.add('active');
                    });
                };
            });
        }
    </script>

    <script src="/js/bundle.js"></script>
    <!-- <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> -->

    <!-- custom js file link  -->
    <!-- <script src="/js/overview.js"></script> -->
</body>
</html>